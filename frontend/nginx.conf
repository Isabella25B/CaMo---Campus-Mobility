# Frontend: nginx.conf
# Purpose: Nginx-Konfiguration für das statische Frontend. Stellt Clean-URLs
# bereit und mapped `/` auf `index.html`. Die `try_files`-Regel löst die
# Weiterleitung zu `/html/<page>.html` für saubere Pfade.
server {
    listen 80;
    server_name localhost;

    # Das Verzeichnis, in das wir den frontend-Ordner mounten
    root /usr/share/nginx/html;
    index index.html;

    # Hauptlogik für Clean URLs
    location / {
        # 1. Prüft ob die Datei existiert (z.B. /css/styles.css)
        # 2. Prüft ob es eine HTML-Datei im Hauptordner ist (z.B. /index)
        # 3. Prüft ob die Datei im /html/ Unterordner liegt (z.B. /stundenplan)
        # 4. Wenn nichts gefunden wird -> 404 Fehler
        try_files $uri $uri/ $uri.html /html$uri.html =404;
    }

    # Verhindert, dass Leute direkt /html/stundenplan.html aufrufen
    # So erzwingst du die saubere URL /stundenplan
    location /html/ {
        internal;
    }
}